{"title":"Nestjs 开发流","uid":"13fdecdad2e10251171eb5f21046894a","slug":"Nestjs 开发流","date":"2020-08-13T00:00:00.000Z","updated":"2021-06-22T10:16:30.101Z","comments":true,"path":"api/articles/Nestjs 开发流.json","keywords":"👨‍💻🎸🍺","cover":null,"content":"<img class=\"kroki\" src='data:image/svg+xml;base64,PHN2ZyBpZD0ibWVybWFpZC0xNjI0MzU3MDA1MTYyIiB3aWR0aD0iNDk2LjAzMTI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBoZWlnaHQ9IjU4IiB2aWV3Qm94PSIwIDAgNDk2LjAzMTI1IDU4Ij48c3R5bGU+I21lcm1haWQtMTYyNDM1NzAwNTE2Mntmb250LWZhbWlseToidHJlYnVjaGV0IG1zIix2ZXJkYW5hLGFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjE2cHg7ZmlsbDojMzMzO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5lcnJvci1pY29ue2ZpbGw6IzU1MjIyMjt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAuZXJyb3ItdGV4dHtmaWxsOiM1NTIyMjI7c3Ryb2tlOiM1NTIyMjI7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmVkZ2UtdGhpY2tuZXNzLW5vcm1hbHtzdHJva2Utd2lkdGg6MnB4O30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5lZGdlLXRoaWNrbmVzcy10aGlja3tzdHJva2Utd2lkdGg6My41cHg7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmVkZ2UtcGF0dGVybi1zb2xpZHtzdHJva2UtZGFzaGFycmF5OjA7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmVkZ2UtcGF0dGVybi1kYXNoZWR7c3Ryb2tlLWRhc2hhcnJheTozO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5lZGdlLXBhdHRlcm4tZG90dGVke3N0cm9rZS1kYXNoYXJyYXk6Mjt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAubWFya2Vye2ZpbGw6IzMzMzMzMztzdHJva2U6IzMzMzMzMzt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAubWFya2VyLmNyb3Nze3N0cm9rZTojMzMzMzMzO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIHN2Z3tmb250LWZhbWlseToidHJlYnVjaGV0IG1zIix2ZXJkYW5hLGFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjE2cHg7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmxhYmVse2ZvbnQtZmFtaWx5OiJ0cmVidWNoZXQgbXMiLHZlcmRhbmEsYXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojMzMzO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5jbHVzdGVyLWxhYmVsIHRleHR7ZmlsbDojMzMzO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5jbHVzdGVyLWxhYmVsIHNwYW57Y29sb3I6IzMzMzt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAubGFiZWwgdGV4dCwjbWVybWFpZC0xNjI0MzU3MDA1MTYyIHNwYW57ZmlsbDojMzMzO2NvbG9yOiMzMzM7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLm5vZGUgcmVjdCwjbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5ub2RlIGNpcmNsZSwjbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5ub2RlIGVsbGlwc2UsI21lcm1haWQtMTYyNDM1NzAwNTE2MiAubm9kZSBwb2x5Z29uLCNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLm5vZGUgcGF0aHtmaWxsOiNFQ0VDRkY7c3Ryb2tlOiM5MzcwREI7c3Ryb2tlLXdpZHRoOjFweDt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAubm9kZSAubGFiZWx7dGV4dC1hbGlnbjpjZW50ZXI7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLm5vZGUuY2xpY2thYmxle2N1cnNvcjpwb2ludGVyO30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5hcnJvd2hlYWRQYXRoe2ZpbGw6IzMzMzMzMzt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAuZWRnZVBhdGggLnBhdGh7c3Ryb2tlOiMzMzMzMzM7c3Ryb2tlLXdpZHRoOjEuNXB4O30jbWVybWFpZC0xNjI0MzU3MDA1MTYyIC5mbG93Y2hhcnQtbGlua3tzdHJva2U6IzMzMzMzMztmaWxsOm5vbmU7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmVkZ2VMYWJlbHtiYWNrZ3JvdW5kLWNvbG9yOiNlOGU4ZTg7dGV4dC1hbGlnbjpjZW50ZXI7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmVkZ2VMYWJlbCByZWN0e29wYWNpdHk6MC41O2JhY2tncm91bmQtY29sb3I6I2U4ZThlODtmaWxsOiNlOGU4ZTg7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgLmNsdXN0ZXIgcmVjdHtmaWxsOiNmZmZmZGU7c3Ryb2tlOiNhYWFhMzM7c3Ryb2tlLXdpZHRoOjFweDt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAuY2x1c3RlciB0ZXh0e2ZpbGw6IzMzMzt9I21lcm1haWQtMTYyNDM1NzAwNTE2MiAuY2x1c3RlciBzcGFue2NvbG9yOiMzMzM7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjIgZGl2Lm1lcm1haWRUb29sdGlwe3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO21heC13aWR0aDoyMDBweDtwYWRkaW5nOjJweDtmb250LWZhbWlseToidHJlYnVjaGV0IG1zIix2ZXJkYW5hLGFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEycHg7YmFja2dyb3VuZDpoc2woODAsMTAwJSw5Ni4yNzQ1MDk4MDM5JSk7Ym9yZGVyOjFweCBzb2xpZCAjYWFhYTMzO2JvcmRlci1yYWRpdXM6MnB4O3BvaW50ZXItZXZlbnRzOm5vbmU7ei1pbmRleDoxMDA7fSNtZXJtYWlkLTE2MjQzNTcwMDUxNjI6cm9vdHstLW1lcm1haWQtZm9udC1mYW1pbHk6InRyZWJ1Y2hldCBtcyIsdmVyZGFuYSxhcmlhbCxzYW5zLXNlcmlmO308L3N0eWxlPjxnPjxnIGNsYXNzPSJvdXRwdXQiPjxnIGNsYXNzPSJjbHVzdGVycyI+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aHMiPjxnIGNsYXNzPSJlZGdlUGF0aCBMUy1BIExFLUIiIGlkPSJMLUEtQiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTcwLjEyNSwyOUw3NC4yOTE2NjY2NjY2NjY2NywyOUM3OC40NTgzMzMzMzMzMzMzMywyOSw4Ni43OTE2NjY2NjY2NjY2NywyOSw5NS4xMjUsMjlDMTAzLjQ1ODMzMzMzMzMzMzMzLDI5LDExMS43OTE2NjY2NjY2NjY2NywyOSwxMTUuOTU4MzMzMzMzMzMzMzMsMjlMMTIwLjEyNSwyOSIgbWFya2VyLWVuZD0idXJsKCNhcnJvd2hlYWQxNykiIHN0eWxlPSJmaWxsOm5vbmUiPjwvcGF0aD48ZGVmcz48bWFya2VyIGlkPSJhcnJvd2hlYWQxNyIgdmlld0JveD0iMCAwIDEwIDEwIiByZWZYPSI5IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI4IiBtYXJrZXJIZWlnaHQ9IjYiIG9yaWVudD0iYXV0byI+PHBhdGggZD0iTSAwIDAgTCAxMCA1IEwgMCAxMCB6IiBjbGFzcz0iYXJyb3doZWFkUGF0aCIgc3R5bGU9InN0cm9rZS13aWR0aDogMTsgc3Ryb2tlLWRhc2hhcnJheTogMSwgMDsiPjwvcGF0aD48L21hcmtlcj48L2RlZnM+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aCBMUy1CIExFLUMiIGlkPSJMLUItQyIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTIyMC4wNDY4NzUsMjlMMjI0LjIxMzU0MTY2NjY2NjY2LDI5QzIyOC4zODAyMDgzMzMzMzMzNCwyOSwyMzYuNzEzNTQxNjY2NjY2NjYsMjksMjQ1LjA0Njg3NSwyOUMyNTMuMzgwMjA4MzMzMzMzMzQsMjksMjYxLjcxMzU0MTY2NjY2NjcsMjksMjY1Ljg4MDIwODMzMzMzMzMsMjlMMjcwLjA0Njg3NSwyOSIgbWFya2VyLWVuZD0idXJsKCNhcnJvd2hlYWQxOCkiIHN0eWxlPSJmaWxsOm5vbmUiPjwvcGF0aD48ZGVmcz48bWFya2VyIGlkPSJhcnJvd2hlYWQxOCIgdmlld0JveD0iMCAwIDEwIDEwIiByZWZYPSI5IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI4IiBtYXJrZXJIZWlnaHQ9IjYiIG9yaWVudD0iYXV0byI+PHBhdGggZD0iTSAwIDAgTCAxMCA1IEwgMCAxMCB6IiBjbGFzcz0iYXJyb3doZWFkUGF0aCIgc3R5bGU9InN0cm9rZS13aWR0aDogMTsgc3Ryb2tlLWRhc2hhcnJheTogMSwgMDsiPjwvcGF0aD48L21hcmtlcj48L2RlZnM+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aCBMUy1DIExFLUQiIGlkPSJMLUMtRCIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTM0MywyOUwzNDcuMTY2NjY2NjY2NjY2NywyOUMzNTEuMzMzMzMzMzMzMzMzMywyOSwzNTkuNjY2NjY2NjY2NjY2NywyOSwzNjgsMjlDMzc2LjMzMzMzMzMzMzMzMzMsMjksMzg0LjY2NjY2NjY2NjY2NjcsMjksMzg4LjgzMzMzMzMzMzMzMzMsMjlMMzkzLDI5IiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93aGVhZDE5KSIgc3R5bGU9ImZpbGw6bm9uZSI+PC9wYXRoPjxkZWZzPjxtYXJrZXIgaWQ9ImFycm93aGVhZDE5IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHJlZlg9IjkiIHJlZlk9IjUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgbWFya2VyV2lkdGg9IjgiIG1hcmtlckhlaWdodD0iNiIgb3JpZW50PSJhdXRvIj48cGF0aCBkPSJNIDAgMCBMIDEwIDUgTCAwIDEwIHoiIGNsYXNzPSJhcnJvd2hlYWRQYXRoIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxOyBzdHJva2UtZGFzaGFycmF5OiAxLCAwOyI+PC9wYXRoPjwvbWFya2VyPjwvZGVmcz48L2c+PC9nPjxnIGNsYXNzPSJlZGdlTGFiZWxzIj48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCI+PC9yZWN0Pjxmb3JlaWduT2JqZWN0IHdpZHRoPSIwIiBoZWlnaHQ9IjAiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij48c3BhbiBpZD0iTC1MLUEtQiIgY2xhc3M9ImVkZ2VMYWJlbCBMLUxTLUEnIEwtTEUtQiI+PC9zcGFuPjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjxnIGNsYXNzPSJlZGdlTGFiZWwiIHRyYW5zZm9ybT0iIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMCkiIGNsYXNzPSJsYWJlbCI+PHJlY3Qgcng9IjAiIHJ5PSIwIiB3aWR0aD0iMCIgaGVpZ2h0PSIwIj48L3JlY3Q+PGZvcmVpZ25PYmplY3Qgd2lkdGg9IjAiIGhlaWdodD0iMCI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPjxzcGFuIGlkPSJMLUwtQi1DIiBjbGFzcz0iZWRnZUxhYmVsIEwtTFMtQicgTC1MRS1DIj48L3NwYW4+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PGcgY2xhc3M9ImVkZ2VMYWJlbCIgdHJhbnNmb3JtPSIiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSIgY2xhc3M9ImxhYmVsIj48cmVjdCByeD0iMCIgcnk9IjAiIHdpZHRoPSIwIiBoZWlnaHQ9IjAiPjwvcmVjdD48Zm9yZWlnbk9iamVjdCB3aWR0aD0iMCIgaGVpZ2h0PSIwIj48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+PHNwYW4gaWQ9IkwtTC1DLUQiIGNsYXNzPSJlZGdlTGFiZWwgTC1MUy1DJyBMLUxFLUQiPjwvc3Bhbj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48L2c+PGcgY2xhc3M9Im5vZGVzIj48ZyBjbGFzcz0ibm9kZSBkZWZhdWx0IiBpZD0iZmxvd2NoYXJ0LUEtMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5LjA2MjUsMjkpIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxyZWN0IHJ4PSIwIiByeT0iMCIgeD0iLTMxLjA2MjUiIHk9Ii0yMSIgd2lkdGg9IjYyLjEyNSIgaGVpZ2h0PSI0MiIgY2xhc3M9ImxhYmVsLWNvbnRhaW5lciI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxLjA2MjUsLTExKSI+PGZvcmVpZ25PYmplY3Qgd2lkdGg9IjQyLjEyNSIgaGVpZ2h0PSIyMiI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPkVudGl0eTwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZSBkZWZhdWx0IiBpZD0iZmxvd2NoYXJ0LUItMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3MC4wODU5Mzc1LDI5KSIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cmVjdCByeD0iMCIgcnk9IjAiIHg9Ii00OS45NjA5Mzc1IiB5PSItMjEiIHdpZHRoPSI5OS45MjE4NzUiIGhlaWdodD0iNDIiIGNsYXNzPSJsYWJlbC1jb250YWluZXIiPjwvcmVjdD48ZyBjbGFzcz0ibGFiZWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMCkiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zOS45NjA5Mzc1LC0xMSkiPjxmb3JlaWduT2JqZWN0IHdpZHRoPSI3OS45MjE4NzUiIGhlaWdodD0iMjIiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij5SZXBvc2l0b3J5PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+PC9nPjxnIGNsYXNzPSJub2RlIGRlZmF1bHQiIGlkPSJmbG93Y2hhcnQtQy0xMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzA2LjUyMzQzNzUsMjkpIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxyZWN0IHJ4PSIwIiByeT0iMCIgeD0iLTM2LjQ3NjU2MjUiIHk9Ii0yMSIgd2lkdGg9IjcyLjk1MzEyNSIgaGVpZ2h0PSI0MiIgY2xhc3M9ImxhYmVsLWNvbnRhaW5lciI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjQ3NjU2MjUsLTExKSI+PGZvcmVpZ25PYmplY3Qgd2lkdGg9IjUyLjk1MzEyNSIgaGVpZ2h0PSIyMiI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPlNlcnZpY2U8L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48L2c+PGcgY2xhc3M9Im5vZGUgZGVmYXVsdCIgaWQ9ImZsb3djaGFydC1ELTEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NDAuNTE1NjI1LDI5KSIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cmVjdCByeD0iMCIgcnk9IjAiIHg9Ii00Ny41MTU2MjUiIHk9Ii0yMSIgd2lkdGg9Ijk1LjAzMTI1IiBoZWlnaHQ9IjQyIiBjbGFzcz0ibGFiZWwtY29udGFpbmVyIj48L3JlY3Q+PGcgY2xhc3M9ImxhYmVsIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzcuNTE1NjI1LC0xMSkiPjxmb3JlaWduT2JqZWN0IHdpZHRoPSI3NS4wMzEyNSIgaGVpZ2h0PSIyMiI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPkNvbnRyb2xsZXI8L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+'>\n\n<h2 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h2><p>定义数据</p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; BaseEntity, Entity, PrimaryGeneratedColumn, Column &#125; from &#39;typeorm&#39;\nimport &#123; TaskStatus &#125; from &#39;.&#x2F;task-status.enum&#39;\n\n@Entity()\nexport class Task extends BaseEntity &#123;\n  @PrimaryGeneratedColumn() &#x2F;&#x2F; 定义主键\n  id: number\n\n  @Column()\n  title: string\n\n  @Column()\n  description: string\n\n  @Column()\n  status: TaskStatus\n&#125;</code></pre>\n\n<h2 id=\"Repository\"><a href=\"#Repository\" class=\"headerlink\" title=\"Repository\"></a>Repository</h2><p>操作数据</p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; Task &#125; from &#39;.&#x2F;task.entity&#39;\nimport &#123; EntityRepository, Repository &#125; from &#39;typeorm&#39;\nimport &#123; CreateTaskDto &#125; from &#39;.&#x2F;dto&#x2F;create-task.dto&#39;\nimport &#123; TaskStatus &#125; from &#39;.&#x2F;task-status.enum&#39;\nimport &#123; GetTasksFilterDto &#125; from &#39;.&#x2F;dto&#x2F;get-tasks-filter-dto&#39;\n\n@EntityRepository(Task)\nexport class TaskRepository extends Repository&lt;Task&gt; &#123;\n  &#x2F;&#x2F; 继承 Repository 享用 findOne delete 等操作\n  async getTasks(filterDto: GetTasksFilterDto): Promise&lt;Task[]&gt; &#123;\n    const &#123; status, search &#125; &#x3D; filterDto\n    const query &#x3D; this.createQueryBuilder(&#39;task&#39;) &#x2F;&#x2F; 使用 QueryBuilder 生成 SQL\n    if (status) &#123;\n      query.andWhere(&#39;task.status &#x3D; :status&#39;, &#123; status &#125;) &#x2F;&#x2F; 添加条件\n    &#125;\n    if (search) &#123;\n      query.andWhere(&#39;task.title LIKE :search OR task.description LIKE :search&#39;, &#123; search: &#96;%$&#123;search&#125;%&#96; &#125;)\n    &#125;\n    const tasks &#x3D; await query.getMany() &#x2F;&#x2F; 执行 SQL 获取数据\n    return tasks\n  &#125;\n\n  async createTask(createTaskDto: CreateTaskDto): Promise&lt;Task&gt; &#123;\n    const &#123; title, description &#125; &#x3D; createTaskDto\n    const task &#x3D; new Task()\n    task.title &#x3D; title\n    task.description &#x3D; description\n    task.status &#x3D; TaskStatus.OPEN\n    await task.save()\n    return task\n  &#125;\n&#125;</code></pre>\n\n<h2 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h2><p>提供服务</p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; Injectable, NotFoundException &#125; from &#39;@nestjs&#x2F;common&#39;\nimport &#123; CreateTaskDto &#125; from &#39;.&#x2F;dto&#x2F;create-task.dto&#39;\nimport &#123; GetTasksFilterDto &#125; from &#39;.&#x2F;dto&#x2F;get-tasks-filter-dto&#39;\nimport &#123; UpdateTaskStatusDto &#125; from &#39;.&#x2F;dto&#x2F;update-task-status.dto&#39;\nimport &#123; TaskRepository &#125; from &#39;.&#x2F;task.repository&#39;\nimport &#123; InjectRepository &#125; from &#39;@nestjs&#x2F;typeorm&#39;\nimport &#123; Task &#125; from &#39;.&#x2F;task.entity&#39;\nimport &#123; TaskStatus &#125; from &#39;.&#x2F;task-status.enum&#39;\n\n@Injectable()\nexport class TasksService &#123;\n  constructor(\n    @InjectRepository(TaskRepository)\n    private taskRepository: TaskRepository\n  ) &#123;&#125;\n\n  async getTasks(filterDto: GetTasksFilterDto): Promise&lt;Task[]&gt; &#123;\n    return this.taskRepository.getTasks(filterDto) &#x2F;&#x2F; 调用 TaskRepository 中封装好的数据操作\n  &#125;\n\n  async getTaskById(id: number): Promise&lt;Task&gt; &#123;\n    &#x2F;&#x2F; 当数据操作比较简单时 可以直接调用 Repository 的方法\n    const foundTask &#x3D; await this.taskRepository.findOne(id)\n    if (!foundTask) throw new NotFoundException(&#96;Task with ID $&#123;id&#125; not found&#96;)\n    return foundTask\n  &#125;\n\n  async createTask(createTaskDto: CreateTaskDto): Promise&lt;Task&gt; &#123;\n    return this.taskRepository.createTask(createTaskDto)\n  &#125;\n\n  async deleteTask(id: number): Promise&lt;any&gt; &#123;\n    const result &#x3D; await this.taskRepository.delete(id)\n    if (result.affected &#x3D;&#x3D;&#x3D; 0) throw new NotFoundException(&#96;Task with ID $&#123;id&#125; not found&#96;)\n  &#125;\n\n  async updateTaskStatus(updateTaskStatusDto: UpdateTaskStatusDto): Promise&lt;Task&gt; &#123;\n    const &#123; id, status &#125; &#x3D; updateTaskStatusDto\n    const foundTask &#x3D; await this.getTaskById(id)\n    foundTask.status &#x3D; TaskStatus[status]\n    await foundTask.save()\n    return foundTask\n  &#125;\n&#125;</code></pre>\n\n<h2 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h2><p>处理请求</p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; Controller, Get, Post, Body, Param, Query, UsePipes, ValidationPipe, ParseIntPipe &#125; from &#39;@nestjs&#x2F;common&#39;\nimport &#123; TasksService &#125; from &#39;.&#x2F;tasks.service&#39;\nimport &#123; CreateTaskDto &#125; from &#39;.&#x2F;dto&#x2F;create-task.dto&#39;\nimport &#123; GetTasksFilterDto &#125; from &#39;.&#x2F;dto&#x2F;get-tasks-filter-dto&#39;\nimport &#123; UpdateTaskStatusDto &#125; from &#39;.&#x2F;dto&#x2F;update-task-status.dto&#39;\nimport &#123; Task &#125; from &#39;.&#x2F;task.entity&#39;\n\n@Controller(&#39;tasks&#39;)\nexport class TasksController &#123;\n  constructor(private taskService: TasksService) &#123;&#125;\n\n  @Get()\n  @UsePipes(ValidationPipe) &#x2F;&#x2F; 使用 ValidationPipe 和 DTO 进行字段的校验\n  getTasks(@Query() filterDto: GetTasksFilterDto) &#123;\n    return this.taskService.getTasks(filterDto)\n  &#125;\n\n  @Get(&#39;&#x2F;:id&#39;)\n  getTaskById(@Param(&#39;id&#39;, ParseIntPipe) id: number): Promise&lt;Task&gt; &#123;\n    &#x2F;&#x2F; ParseIntPipe string&#x3D;&gt;number (如果转换失败将抛出异常)\n    return this.taskService.getTaskById(id)\n  &#125;\n\n  @Post(&#39;&#x2F;create&#39;)\n  @UsePipes(ValidationPipe)\n  createTask(@Body() createTaskDto: CreateTaskDto): Promise&lt;Task&gt; &#123;\n    return this.taskService.createTask(createTaskDto)\n  &#125;\n\n  @Post(&#39;&#x2F;delete&#39;)\n  deleteTask(@Body(&#39;id&#39;, ParseIntPipe) id: number): Promise&lt;void&gt; &#123;\n    return this.taskService.deleteTask(id)\n  &#125;\n\n  @Post(&#39;&#x2F;status&#x2F;update&#39;)\n  @UsePipes(ValidationPipe)\n  async updateTaskStatus(@Body() updateTaskStatusDto: UpdateTaskStatusDto): Promise&lt;Task&gt; &#123;\n    return this.taskService.updateTaskStatus(updateTaskStatusDto)\n  &#125;\n&#125;</code></pre>\n","text":" Entity定义数据 import &#123; BaseEntity, Entity, PrimaryGeneratedColumn, Column &#125; from &#39;typeorm&#39; import &#123; TaskStatus &#125; f...","link":"","photos":[],"count_time":{"symbolsCount":"5.7k","symbolsTime":"5 mins."},"categories":[{"name":"拓展","slug":"拓展","count":10,"path":"api/categories/拓展.json"}],"tags":[{"name":"Node.js","slug":"Node-js","count":2,"path":"api/tags/Node-js.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Entity\"><span class=\"toc-text\">Entity</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Repository\"><span class=\"toc-text\">Repository</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Service\"><span class=\"toc-text\">Service</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Controller\"><span class=\"toc-text\">Controller</span></a></li></ol>","author":{"name":"ZV","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"致过去的时光","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"复习一下Generator的使用","uid":"c1e7e740a56d87809715d43780d153ea","slug":"复习一下Generator的使用","date":"2020-08-25T00:00:00.000Z","updated":"2021-06-22T10:16:30.101Z","comments":true,"path":"api/articles/复习一下Generator的使用.json","keywords":"👨‍💻🎸🍺","cover":null,"text":"先来个例题 看一下结果 function* addGen(x) &#123; let y &#x3D; (yield x + 5) * 2 let z &#x3D; yield y &#x2F; 4 return x + y + z &#125; let g &#x3D; add...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"前端","slug":"前端","count":17,"path":"api/categories/前端.json"}],"tags":[{"name":"JavaScript","slug":"JavaScript","count":14,"path":"api/tags/JavaScript.json"}],"author":{"name":"ZV","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"致过去的时光","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"百度地图与React","uid":"ddc597ec7f043c7134b0654946012fa0","slug":"百度地图与React","date":"2020-07-21T00:00:00.000Z","updated":"2021-06-22T10:16:30.101Z","comments":true,"path":"api/articles/百度地图与React.json","keywords":"👨‍💻🎸🍺","cover":null,"text":"WEB 端文档 JavaScript API 微信小程序 JavaScript API 地铁图 JavaScript API 位置数据可视化 MapV GL 与 React 结合以 JavaScript API GL v1.0 版本的 SDK为例 首先在public\\index....","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"前端","slug":"前端","count":17,"path":"api/categories/前端.json"}],"tags":[{"name":"JavaScript","slug":"JavaScript","count":14,"path":"api/tags/JavaScript.json"},{"name":"React","slug":"React","count":1,"path":"api/tags/React.json"}],"author":{"name":"ZV","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"致过去的时光","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}