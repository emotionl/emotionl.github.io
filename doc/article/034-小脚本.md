# 小脚本

1. 获取油管当前页面视频的 url 地址

   ```javascript
   function getPageVideoUrl() {
       let queryContent = 'ytd-grid-video-renderer #dismissable #details #meta h3 #video-title'
       let eleList = Array.from(document.querySelectorAll(queryContent))
       let padLeft = 'https://www.youtube.com'
       return eleList.map(item => {
           let title = item.getAttribute('title')
           let href = padLeft + item.getAttribute('href')
           return {
               title,
               href
           }
       })
   }
   function getDownloadList(infoList) {
       return infoList.map(item => {
           let { title, href } = item
           href = 'http://www.findyoutube.com/parse.php?url=' + window.btoa(item.href)
           return { title, href }
       })
   }
   JSON.stringify(getDownloadList(getPageVideoUrl()))
   ```

2. Truefire 课程列表

   ```javascript
   ;(function getTruefireLessonList() {
       let eles = Array.from(document.querySelectorAll('#courseDetailsToc .courseDetailsIncludedList li'))
       eles.pop()
       let titles = eles.map((item, index) => {
           let { childNodes } = item
           let indexStr = String(++index)
           indexStr = indexStr.length === 1 ? '0' + indexStr : indexStr
           let aText = childNodes[0].innerText
           let divText = childNodes[2].innerText
           return `${indexStr}-${aText}-${divText}`
       })
       return titles.join('\n')
   })()
   ```
