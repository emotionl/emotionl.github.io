# 正则案例4

## 需求

根据需求匹配数据并提取所需数据

处理前

```javascript
const textList = [
    '@[]', // 不匹配
    '@[123]', // 不匹配
    '@asd[133]', // 匹配
    '@阿里巴巴(杭州)(西湖)[546789][12113][12113][12113][12113][12113][12113]', // 匹配
    '@阿里巴巴(杭州)(西湖)[12113]', // 匹配
    '@阿里巴巴[444]' // 匹配
]
```

处理后

```javascript
[
    { name: 'asd', id: '133' },
    { name: '阿里巴巴(杭州)(西湖)', id: '546789' },
    { name: '阿里巴巴(杭州)(西湖)', id: '12113' },
    { name: '阿里巴巴', id: '444' }
]
```

## 解决

```javascript
// 确定处理函数
const getFormatTextList = (textList) => {
  const regex = /\@([^\[]+)(?<=\@.+)\[(\d+)\]/
  return textList
    .filter((item) => regex.test(item))
    .map((item) => {
      const [_, name, id] = item.match(regex)
      return {
        name,
        id
      }
    })
}

// 准备数据
const textList = [
  '@[]', // 不匹配
  '@[123]', // 不匹配
  '@asd[133]', // 匹配
  '@阿里巴巴(杭州)(西湖)[546789][12113][12113][12113][12113][12113][12113]', // 匹配
  '@阿里巴巴(杭州)(西湖)[12113]', // 匹配
  '@阿里巴巴[444]' // 匹配
]

// 处理
const formatTextList = getFormatTextList(textList)

// 打印结果
console.log(formatTextList)
```

