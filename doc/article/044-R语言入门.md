# R语言知识点杂记

## 数据类型

- **Vectors** (one dimensional array): can hold numeric, character or logical values. The elements in a vector all have the same data type.
- **Matrices** (two dimensional array): can hold numeric, character or logical values. The elements in a matrix all have the same data type.
- **Data frames** (two-dimensional objects): can hold numeric, character or logical values. Within a column all elements have the same data type, but different columns can be of different data type.
- **Lists**: 'As opposed to vectors, lists can hold components of different types, just as your to-do lists can contain different categories of tasks. This chapter will teach you how to create, name, and subset these lists.'

## R语言的标准差

当我们按照课本里的公式去实现一个求标准差的函数时大概是这样的

```R
get_sd <- function(vec) {
  square_sum <- 0
  vec_length <- length(vec)
  vec_mean <- mean(vec)
  for (item in vec) {
    square_sum <- square_sum + (item - vec_mean) ^ 2
  }
  vec_sd <- sqrt(square_sum / vec_length)
  return(vec_sd)
}
```

但是当我们使用 `R` 语言中自带的 `sd`函数计算标准差的时候答案却不太一样

测试数据 `num_vec <- c(1, 2, 3, 4)`

测试结果

```R
get_sd(num_vec)	 
# [1] 1.118034
sd(num_vec)
# [1] 1.290994
```

那么问题到底出现在哪一个环节呢

一通 `Google` 后在 [Standard Deviation in R Seems to be Returning the Wrong Answer - Am I Doing Something Wrong?](https://stackoverflow.com/questions/6457755/standard-deviation-in-r-seems-to-be-returning-the-wrong-answer-am-i-doing-some)找到了答案

意思大致是说 `R`语言中内建的 `sd`函数算的是**样本标准差**而我们书本里教的则是**整体标准差**

**样本标准差**的时候分母是`n-1`  而**整体标准差**的分母则是`n`

坟墓的差别造成了两次实验结果的差异

> 为什么样本方差（sample variance）的分母是 n-1？ - 张英锋的回答 - 知乎 https://www.zhihu.com/question/20099757/answer/658048814
>
> [标准差和方差](https://www.shuxuele.com/data/standard-deviation.html)

## R语言的返回值

- R语言中 return 本身就是一个函数，所以必须使用 `return(...)` 的方式，括号不能省略；这意味着显式返回变成一种函数调用，可能降低程序运行效率。
- 不使用 return 也可以提供返回值，所以 R 语言的普遍习惯用法是**避免显式调用** `return()`。
- 如果显式调用 `return()` 可以使得函数的结构更加清楚，那就尽管调用吧，没有问题。

> 参考资料：[StackOverflow - Explicitly calling return in a function or not](https://link.zhihu.com/?target=http%3A//stackoverflow.com/questions/11738823/explicitly-calling-return-in-a-function-or-not)