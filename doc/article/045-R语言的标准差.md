# R语言的标准差

当我们按照课本里的公式去实现一个求标准差的函数时大概是这样的

```R
get_sd <- function(vec) {
  square_sum <- 0
  vec_length <- length(vec)
  vec_mean <- mean(vec)
  for (item in vec) {
    square_sum <- square_sum + (item - vec_mean) ^ 2
  }
  vec_sd <- sqrt(square_sum / vec_length)
  return(vec_sd)
}
```

但是当我们使用 `R` 语言中自带的 `sd`函数计算标准差的时候答案却不太一样

测试数据 `num_vec <- c(1, 2, 3, 4)`

测试结果

```R
get_sd(num_vec)	 
# [1] 1.118034
sd(num_vec)
# [1] 1.290994
```

那么问题到底出现在哪一个环节呢

一通 `Google` 后在 [Standard Deviation in R Seems to be Returning the Wrong Answer - Am I Doing Something Wrong?](https://stackoverflow.com/questions/6457755/standard-deviation-in-r-seems-to-be-returning-the-wrong-answer-am-i-doing-some)找到了答案

意思大致是说 `R`语言中内建的 `sd`函数算的是**样本标准差**而我们书本里教的则是**整体标准差**

**样本标准差**的时候分母是`n-1`  而**整体标准差**的分母则是`n`

坟墓的差别造成了两次实验结果的差异

> 为什么样本方差（sample variance）的分母是 n-1？ - 张英锋的回答 - 知乎 https://www.zhihu.com/question/20099757/answer/658048814
>
> [标准差和方差](https://www.shuxuele.com/data/standard-deviation.html)

